\chapter{Model categories}

We will introduce the concept of model categories and homotopy categories to define derived categories without recurring to the calculus of fractions. The main reference we will be using is \cite{dwyer1995homotopy}, while \cite{hovey2007model} is a very good expository paper.

\section{Basic definitions}
Let $\C$ be a category.

\begin{definition}[Lift]
    Given a commuting square in $\C$
    \[\begin{tikzcd}
	    A & X \\
	    B & {Y,}
	    \arrow[from=1-1, to=1-2]
	    \arrow["i", from=1-1, to=2-1]
	    \arrow["p", from=1-2, to=2-2]
	    \arrow[from=2-1, to=2-2]
    \end{tikzcd}\]
    a \textbf{lift} is a morphism $f\colon B \longrightarrow X$ such that
    \[\begin{tikzcd}
	    A & X \\
	    B & Y
	    \arrow[from=1-1, to=1-2]
	    \arrow["i", from=1-1, to=2-1]
	    \arrow["p", from=1-2, to=2-2]
	    \arrow["f", from=2-1, to=1-2]
	    \arrow[from=2-1, to=2-2]
    \end{tikzcd}\]
    commutes. In the case where a lift exists we will say that $i$ has the \textbf{left lifting property} (shortened as LLP) with respect to $p$; dually we will say that $p$ has the \textbf{right lifting property} (shortened as RLP) with respect to $i$.

\end{definition}


\begin{definition}[Retract]
    Let $X,Y$ be objects in $\C$, we say that $X$ is a retract of $Y$ if there exists arrows $f,g$ such that $gf = \id_X$.    
\end{definition}


\begin{remark}
	The case we are most interested in is when we are taking retracts in a category of morphisms, unraveling the definition we get the following: if $\C = \ar(\D)$ then $f$ is a retract of $g$ if and only if there exists $i,i',p,p'$ such that
    \[\begin{tikzcd}
	    X & Y & X \\
	    {X'} & {Y'} & {X'}
	    \arrow["i", from=1-1, to=1-2]
	    \arrow["{\id_X}", curve={height=-18pt}, from=1-1, to=1-3]
	    \arrow["f", from=1-1, to=2-1]
	    \arrow["p", from=1-2, to=1-3]
	    \arrow["g", from=1-2, to=2-2]
	    \arrow["f", from=1-3, to=2-3]
	    \arrow["{i'}", from=2-1, to=2-2]
	    \arrow["{\id_{X'}}"', curve={height=18pt}, from=2-1, to=2-3]
	    \arrow["{p'}", from=2-2, to=2-3]
    \end{tikzcd}\]
	commutes.
\end{remark}


We will now state a lemma that we will often use in dealing with model categories.

\begin{lemma}[The retract argument]
	Let $f\colon A \longrightarrow C$ be an arrow of $\C$ that can be factored as $f=pi$ and suppose that $f$ has the LLP with respect to $p$. Then $f$ is a retract of $i$. Dually, if $f$ has the RLP with respect to $i$, it is a retract of $p$.
\end{lemma}
\begin{proof}
	It suffices to prove the first case, the second case is dual to the one shown. Let us begin by observing that requiring that $f=pi$ is equivalent to ensuring the commutativity of the following diagram:
	\[\begin{tikzcd}
		A & B \\
		C & {C.}
		\arrow["i"', from=1-1, to=1-2]
		\arrow["f", from=1-1, to=2-1]
		\arrow["p"', from=1-2, to=2-2]
		\arrow["{\id_C}", from=2-1, to=2-2]
	\end{tikzcd}\]
	Applying the LLP to the square and expanding the diagram we get
	\[\begin{tikzcd}
		A & A & A \\
		C & B & {C,}
		\arrow["{\id_A}"', from=1-1, to=1-2]
		\arrow["f", from=1-1, to=2-1]
		\arrow["{\id_A}"', from=1-2, to=1-3]
		\arrow["i"', from=1-2, to=2-2]
		\arrow["f"', from=1-3, to=2-3]
		\arrow["g", from=2-1, to=2-2]
		\arrow["p", from=2-2, to=2-3]
	\end{tikzcd}\]
	where $g$ is the morphism that we get from the LLP. This shows exactly the thesis.
\end{proof}

We can now introduce the main object that we will discuss.

Let us consider a triple $(W, \fibT, \cofT)$ of subclasses of $\ar(\C)$, called respectively weak equivalences ($\we$), fibrations ($\fib$) and cofibrations ($\cof$); we will name the class $W\cap \fibT $ as acyclic fibrations ($\afib$) and $W \cap \cofT$ as acyclic cofibrations ($\acof$).

\section{Model categories}

\begin{definition}[Model structure]
	They are said to form a \textbf{model structure} on $\C$ if they satisfy the following axioms:
	\begin{itemize}
		\item[(\textbf{MC1})] If $f$ and $g$ are composable morphisms of $\C$ and two out three between $f,g,gf$ are weak equavalences then also the this is.
		\item[(\textbf{MC2})] $W$, $\fibT$ and $\cofT$ are closed under retractions.
		\item[(\textbf{MC3})] Trivial cofibrations have the LLP with respect to the fibrations, while the trivial fibrations have the RLP with the respect to the cofibrations.
		\item[(\textbf{MC4})] Every arrow $f$ admits both of the following factorizations: (1) $f=pi$ where $i$ is an acyclic cofibration and $p$ is a fibration, and (2) $f=pi$ where $i$ is a cofibration and $p$ is an acyclic fibration.
	\end{itemize}
\end{definition}

\begin{definition}[Model category]
	A \textbf{model category} $\C$ is a complete and cocomplete category along with a model structure on it. We will denote its weak equivalences as $W(\C)$, its fibrations as $\fibT(\C)$ and its cofibrations as $\cofT(\C)$.
\end{definition}

\begin{remark}
	Sometimes in the definition of model category it is required that the factorization be functorial; we will not make such demand.
\end{remark}



We will from now on use $\C$ to refer to a model category.

\begin{proposition}
	In a model category, the cofibrations (resp. trivial cofibrations) are exactly the morphisms that have the LLP with respect to all trivial fibrations (resp. fibrations). Dually the fibrations (resp. trivial fibrations) are exactly the morphisms that have the RLP with respect to all trivial cofibrations (resp. cofibrations).
\end{proposition}
\begin{proof}
	We will only show the characterization of cofibrations, the other are analogous. By (\textbf{MC3}) cofibrations must have such property, therefore we need only to show the converse: let $f: A\longrightarrow \C$ be a morphism that has the LLP with respect to all trivial fibrations, by applying (\textbf{MC4}) we can obtain a factorization $f=pi$ where $p$ is a trivial fibration and $i$ is a cofibration; by applying the retract argument and using (\textbf{MC2}) we conclude.
\end{proof}

\begin{corollary}
	Every isomorphism is both a trivial fibration and a trivial cofibration. This in particular is true for the identity morphisms.
\end{corollary}
\begin{proof}
	The corollary follows immediately from the proposition by using the inverse morphism to construct lifts.
\end{proof}

\begin{corollary}
	The class of weak equivalences, fibrations and cofibrations is closed under composition.
\end{corollary}
\begin{proof}
	The case of weak equivalences is a consequence of (\textbf{MC1}), we will prove the case of fibrations (the other is dual).
	Using the proposition, we need only to show that the composition of two fibrations $p$, $p'$ has the RLP with respect to any acyclic fibration $i$. To do so, it is sufficient to apply (\textbf{MC3}) twice as in the diagram below, first to get $f$ and then again in the new square to obtain $g$.
	\[\begin{tikzcd}
		A && X \\
		&& Y \\
		B && Z
		\arrow[from=1-1, to=1-3]
		\arrow["i", "\sim"', hook', from=1-1, to=3-1]
		\arrow["p", two heads, from=1-3, to=2-3]
		\arrow["{p'}", two heads, from=2-3, to=3-3]
		\arrow["g", dashed, from=3-1, to=1-3]
		\arrow["f"', dashed, from=3-1, to=2-3]
		\arrow[from=3-1, to=3-3]
	\end{tikzcd}\]
\end{proof}

\begin{corollary}
	Being a fibration (resp. cofibration) is a property that is invariant with respect to taking pullbacks (resp. pushouts). The same is true for acyclic (co)fibrations.
\end{corollary}
\begin{proof}
	Let us only show the case with fibrations: let $p\colon A \fib B$ be a fibration, then the universal property of the pullback implies that if $p$ has the RLP with respect to a morphism, then we can say the same for the pushout (see the diagram below).
	\[\begin{tikzcd}
		X & {A\times_{B'}B} & A \\
		Y & B & B
		\arrow[from=1-1, to=1-2]
		\arrow["i", hook, from=1-1, to=2-1]
		\arrow[from=1-2, to=1-3]
		\arrow[from=1-2, to=2-2]
		\arrow["p", two heads, from=1-3, to=2-3]
		\arrow[dashed, from=2-1, to=1-2]
		\arrow[dashed, from=2-1, to=1-3]
		\arrow[from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
	\end{tikzcd}\]
\end{proof}

\begin{definition}[Fibrant and cofibrant objects]
	An object $A$ is said to be \textbf{fibrant} if the terminal morphism $A \longrightarrow *$ is a fibration; an object $B$ is said to be \textbf{cofibrant} if the initial morphism $\emptyset \longrightarrow B$ is a cofibration.
\end{definition}

\begin{remark}
	Let $A,B$ be cofibrant objects, given that the coproduct $A \amalg B$ can be seen as the pushout with respect to the initial object, we deduce that both $\inn_1$ and $\inn_2$ must be cofibrations.
	\[\begin{tikzcd}
		\emptyset & A \\
		B & {A\amalg B}
		\arrow[from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow["{\inn_1}", from=1-2, to=2-2]
		\arrow["{\inn_2}"', from=2-1, to=2-2]
	\end{tikzcd}\]
	The dual result is also true: if $A,B$ are fibrant then both projections
	\begin{align*}
		\pi_1\colon A\times B \longrightarrow A\\
		\pi_2\colon A \times B \longrightarrow B
	\end{align*}
	must be fibrations.
\end{remark}


\begin{example}
	We will now study the example of the category of topological spaces.\\
	\textbf{DECIDERE COSA SCRIVERE}
\end{example}


\begin{lemma}[Ken Brown's lemma]
	Let $\D$ be a category with a class of weak equivalences that satisfy (\textbf{MC1}). Suppose $F: \C \longrightarrow \D$ is a functor which takes acyclic cofibrations between cofibrant objects to weak equivalences, then $F$ takes all weak equivalences between cofibrant objects to weak equivalences. \\
	Dually, if $F$ takes acyclic fibrations between fibrant objects to weak equivalences, then it takes weak equivalences between fibrant objects to weak equivalences.
\end{lemma}


\begin{proof}
	We will only prove the case for acyclic cofibrations; the other case is dual.
	Let $f:A \longrightarrow B$ be a weak equivalence between cofibrant objects. Using (\textbf{MC4}) we can factor $f$ as
	\[\begin{tikzcd}
		{A \amalg B} & C & {B,}
		\arrow["j", hook, from=1-1, to=1-2]
		\arrow["p", "\sim"', two heads, from=1-2, to=1-3]
	\end{tikzcd}\]
	where $p$ is an acyclic fibration and $j$ is a cofibration. By applying (\textbf{MC1}) we see that ${j \circ \inn_1}$ and ${j \circ \inn_2}$ are necessarily acyclic cofibrations.
	\[\begin{tikzcd}
		A \\
		{A \amalg B} && C && B \\
		B
		\arrow["{\inn_1}"', hook, from=1-1, to=2-1]
		\arrow["{j \: \inn_1}"{description}, from=1-1, to=2-3]
		\arrow["f", "\sim"', curve={height=-12pt}, from=1-1, to=2-5]
		\arrow["j", hook, from=2-1, to=2-3]
		\arrow["p", "\sim"', from=2-3, to=2-5]
		\arrow["{\inn_2}", hook, from=3-1, to=2-1]
		\arrow["{j \: \inn_2}"{description}, from=3-1, to=2-3]
		\arrow["{\id_B}"', "\sim", curve={height=12pt}, from=3-1, to=2-5]
	\end{tikzcd}\]
	Using our hypothesis we deduce that $F({j \circ \inn_1})$ and $F({j \circ \inn_2})$ are weak equivalences; applying (\textbf{MC1}) to $F(p) \circ F(j \circ \inn_2) = \id_{F(B)}$ we get that $F(p)$ is a weak equivalence. We conclude by applying (\textbf{MC1}) to $F(p) F(j \circ \inn_2)\circ  =F(f)$ to obtain the fact $F(f)$ is a weak equivalence.
\end{proof}

\begin{definition}[Abelian model categories]
	Let $\C$ be a model category where the underlying category is abelian; we will refer to $\C$ as an \textbf{abelian model category} if the following hold:
	\begin{itemize}
		\item A morphism is a cofibration if and only if it is a monomorphism with cofibrant cokernel.
		\item A morphism is a fibration if and only if it is an epimorphism with fibrant kernel.
	\end{itemize}
\end{definition}



\section{Homotopy relations}

\begin{definition}[Cylinder objects]
	Let $A$ be an object of $\C$; a \textbf{cylinder object} is and object $A \wedge I$ (when we consider multiple cylinders we can add superscripts/subscripts to $I$), and a diagram
	\[\begin{tikzcd}
		{A\amalg A} & {A\wedge I} & {A.}
		\arrow["i", from=1-1, to=1-2]
		\arrow["{\nabla_A}"', curve={height=24pt}, from=1-1, to=1-3]
		\arrow["q", "\sim"', from=1-2, to=1-3]
	\end{tikzcd}\]
	A cylinder object is a \textbf{good cylinder object} if the morphism
	\[\begin{tikzcd}
		{A\amalg A} & {A\wedge I}
		\arrow["i", from=1-1, to=1-2]
	\end{tikzcd}\]
	is a cofibration.\\
	A cylinder object is a \textbf{very good cylinder object} if the morphism
	\[\begin{tikzcd}
		{A\wedge I} & {A}
		\arrow["q", "\sim"', from=1-1, to=1-2]
	\end{tikzcd}\]
	is an acyclic fibration. We also denote the morphisms $A \longrightarrow A \wedge I$ as follows:
	\[\begin{tikzcd}
		A \\
		& {A \amalg A} & {A\wedge I.} \\
		A
		\arrow["{\inn_1}"', from=1-1, to=2-2]
		\arrow["{i_1}"', curve={height=-18pt}, from=1-1, to=2-3]
		\arrow["i", from=2-2, to=2-3]
		\arrow["{\inn_2}", from=3-1, to=2-2]
		\arrow["{i_2}", curve={height=18pt}, from=3-1, to=2-3]
	\end{tikzcd}\]
\end{definition}

\begin{definition}[Path objects]
	Let $B$ be an object of $\C$; a \textbf{path object} is and object $A ^ I$ (when we consider multiple paths we can add superscripts/subscripts to $I$), and a diagram
	\[\begin{tikzcd}
		{B} & {B^ I} & {B\times B.}
		\arrow["j", "\sim"', from=1-1, to=1-2]
		\arrow["{\Delta_A}"', curve={height=24pt}, from=1-1, to=1-3]
		\arrow["p", from=1-2, to=1-3]
	\end{tikzcd}\]
	A cylinder object is a \textbf{good path object} if the morphism
	\[\begin{tikzcd}
		{B^I} & {B \times B}
		\arrow["p", from=1-1, to=1-2]
	\end{tikzcd}\]
	is a fibration.\\
	A cylinder object is a \textbf{very good path object} if the morphism
	\[\begin{tikzcd}
		{B} & {B^I}
		\arrow["j", "\sim"', from=1-1, to=1-2]
	\end{tikzcd}\]
	is an acyclic cofibration. We also denote the morphisms $B^I \longrightarrow B$ as follows:
	\[\begin{tikzcd}
		&& B \\
		B & {B^I} & {B\times B.} \\
		&& B
		\arrow["{\id_B}", curve={height=-12pt}, from=2-1, to=1-3]
		\arrow["j", from=2-1, to=2-2]
		\arrow["{\id_B}"', curve={height=12pt}, from=2-1, to=3-3]
		\arrow["{p_1}", from=2-2, to=1-3]
		\arrow["p", from=2-2, to=2-3]
		\arrow["{p_2}"', from=2-2, to=3-3]
		\arrow["{\pi_1}"', from=2-3, to=1-3]
		\arrow["{\pi_2}", from=2-3, to=3-3]
	\end{tikzcd}\]
\end{definition}


It is important to observe that for every object $A$ a very good cylinder object exists always: we only need to apply (\textbf{MC4}) to $\nabla_A \colon A \amalg A \longrightarrow A$; dually for every object $B$ a very good path object always exists.




\begin{remark}
	Given a cylinder $A\wedge I$, we know that $q \circ i_1 = q \circ i \circ\inn_1 = \nabla_A \circ \inn_1 = \id_A$ (see the diagram). Both $\id_A$ and $q$ are weak equivalences, therefore by (\textbf{MC1}) we assert that $i_1$ must also be a weak equivalence (and the same can be said for $i_2,p_1,p_2$). 
	\[\begin{tikzcd}
		A \\
		{A \amalg A} & {A \wedge I} & A \\
		A
		\arrow["{\inn_1}"', from=1-1, to=2-1]
		\arrow["{i_1}", from=1-1, to=2-2]
		\arrow["{\id_A}", curve={height=-12pt}, from=1-1, to=2-3]
		\arrow["i", from=2-1, to=2-2]
		\arrow["q", "\sim"', from=2-2, to=2-3]
		\arrow["{\inn_2}", from=3-1, to=2-1]
		\arrow["{i_2}"', from=3-1, to=2-2]
		\arrow["{\id_A}"', curve={height=12pt}, from=3-1, to=2-3]
	\end{tikzcd}\]
	If $A \wedge I$ is a good cylinder and $A$ is cofibrant then $i_1= i \circ \inn_1$ is the composition of cofibrations, therefore $i_1$ (and $i_2$) must be acyclic cofibrations; dually if $B^I$ is a good path object and $B$ is fibrant then $p_1,p_2$ are acyclic fibrations.
\end{remark}

\begin{definition}[Homotopies]
	Two morphisms $f,g\colon A \longrightarrow B$ are said to be \textbf{left homotopic} (denoted $f \lsim g$) if there exist a cylinder $A\wedge I$ and a morphism $H\colon A\wedge I \longrightarrow B$ such that
	\[\begin{tikzcd}
		A \\
		& {A \wedge I} && B \\
		A
		\arrow["{i_1}"', from=1-1, to=2-2]
		\arrow["f", curve={height=-12pt}, from=1-1, to=2-4]
		\arrow["H", from=2-2, to=2-4]
		\arrow["{i_2}", from=3-1, to=2-2]
		\arrow["g"', curve={height=12pt}, from=3-1, to=2-4]
	\end{tikzcd}\]
	commutes. We will refer to the diagram as a \textbf{left homotopy}. \\
	Similarly, two morphisms $f,g\colon A \longrightarrow B$ are said to be \textbf{right homotopic} (denoted $f \rsim g$) if there exist a path $B^ I$ and a morphism $H\colon A \longrightarrow B^I$ such that
	\[\begin{tikzcd}
		&&& B \\
		A && {B^I} \\
		&&& B
		\arrow["f", curve={height=-12pt}, from=2-1, to=1-4]
		\arrow["H", from=2-1, to=2-3]
		\arrow["g"', curve={height=12pt}, from=2-1, to=3-4]
		\arrow["{p_1}"', from=2-3, to=1-4]
		\arrow["{p_2}", from=2-3, to=3-4]
	\end{tikzcd}\]
	commutes. We will refer to the diagram as a \textbf{right homotopy}. \\
	An homotopy is said to be \textbf{good} (resp. \textbf{very good}) if the cylinder/path is good (resp. very good). \\
	We say that $f$ and $g$ are homotopic (denoted $f \sim g$) if they are both left and right homotopic.

\end{definition}

We will now state some preliminary lemmas, each contains a statement and its dual, so we will only prove one of them.  

\begin{lemma}
	\label{lem:weak-closed-hom}
	If $f \lsim g$ (or $f \rsim g$) and $f$ is a weak equivalence then $g$ is also a weak equivalence. 
\end{lemma}
\begin{proof}
	Let $H : A\wedge I \longrightarrow B$ be a left homotopy between $f$ and $g$.
	\[\begin{tikzcd}
		A \\
		& {A\wedge I} & B \\
		A
		\arrow["{i_1}", "\sim"', from=1-1, to=2-2]
		\arrow["f", "\sim"', curve={height=-12pt}, from=1-1, to=2-3]
		\arrow["H", from=2-2, to=2-3]
		\arrow["{i_2}", "\sim"', from=3-1, to=2-2]
		\arrow["g"', curve={height=12pt}, from=3-1, to=2-3]
	\end{tikzcd}\]
	By (\textbf{MC1}) $H$ is a weak equivalence, so $g$ must also be a weak equivalence.

\end{proof}


\begin{lemma}
	\label{lem:good-hom}
	Let $f,g \colon A \longrightarrow B$ then:
	\begin{enumerate}
		\item If $f \lsim g$ then there exists a good left homotopy from $f$ to $g$.
		\item If $f \lsim g$ and $B$ is fibrant then there exists a very good left homotopy from $f$ to $g$.
		\item If $f \rsim g$ then there exists a good right homotopy from $f$ to $g$.
		\item If $f \rsim g$ and $A$ is cofibrant then there exists a very good right homotopy from $f$ to $g$.
	\end{enumerate}
\end{lemma}
\begin{proof}
	The first statement follows from applying (\textbf{MC4}) to the morphism $A \amalg A \wedge I$, where $A \wedge I$ is the cylinder object of a left homotopy between $f$ and $g$. \\
	Let now hypothesize that $B$ is fibrant and let us take $H' \colon A \wedge I' \longrightarrow B$ to be a good homotopy between $f$ and $g$. By applying (\textbf{MC4}) we can factor the morphism $q\colon A\wedge I' \longrightarrow A$ as
	\[\begin{tikzcd}
		{A\wedge I'} & {A\wedge I ''} & {B.}
		\arrow["\sim"', "i''", hook, from=1-1, to=1-2]
		\arrow["\sim"', "p''", two heads, from=1-2, to=1-3]
	\end{tikzcd}\]
	By then finding a lift $H''$ in the square 
	\[\begin{tikzcd}
		{A\wedge I'} & B \\
		{A\wedge I''} & {*}
		\arrow["{H'}", from=1-1, to=1-2]
		\arrow["{i''}", hook, from=1-1, to=2-1]
		\arrow[two heads, from=1-2, to=2-2]
		\arrow["{H''}"', dashed, from=2-1, to=1-2]
		\arrow[from=2-1, to=2-2]
	\end{tikzcd}\]
	we find our desired very good homotopy.
\end{proof}


\begin{definition}
	We define $\pi^l(A,B)$ as the quotient of $\Hom_\C(A,B)$ given by the equivalence relation generated by the relation $\lsim$. We define $\pi^r(A,B)$ as the quotient of $\Hom_\C(A,B)$ given by the equivalence relation generated by the relation $\rsim$. 
\end{definition}

It is important to notice that $\lsim$ and $\rsim$ aren't generally equivalence relations, therefore the word \virgolette{generated} is of key importance in the definition. Luckily 

\begin{lemma}
	If $A$ is cofibrant, then the relation $\lsim$  is an equivalence relations on $\Hom_\C(A,B)$.
	If $B$ is fibrant, then the relation $\rsim$ is an equivalence relations on $\Hom_\C(A,B)$. 
\end{lemma}

\begin{proof}
	The fact that the relation $\lsim$ is symmetric is obvious, given that its definition is symmetric, meanwhile showing that it is reflaxing necessitates only observing the existence of the trivial cylinder 
	\[\begin{tikzcd}
		{A\amalg A} & A & {A.}
		\arrow["{\nabla_A}", from=1-1, to=1-2]
		\arrow["{\nabla_A}"', curve={height=12pt}, shift right=1, from=1-1, to=1-3]
		\arrow["{\id_A}", "\sim"', from=1-2, to=1-3]
	\end{tikzcd}\]
	We now only need to prove that the relation is transitive. Let us suppose that $f \lsim g$ and that $g \lsim h$, given by good homotopies $H\colon A \wedge I \longrightarrow B$ and $H' \colon A \wedge I' \longrightarrow B$. We can take the pushout given by 
	\[\begin{tikzcd}
		{A \wedge I'} & A & {A\wedge I}
		\arrow["{i_1'}"', from=1-2, to=1-1]
		\arrow["{i_2}", from=1-2, to=1-3]
	\end{tikzcd}\]
	to get an object $A\wedge I''$. Using the universal property of the pushout we get a morphism $q'' \colon A \wedge I'' \longrightarrow A$.
	\[\begin{tikzcd}
		A \\
		{A\amalg A} & {A\wedge I} \\
		A && {A \wedge I''} & {A,} \\
		{A \amalg A} & {A \wedge I'} \\
		A
		\arrow["{i_1}", "\sim"', hook, from=1-1, to=2-2]
		\arrow[from=1-1, to=2-1]
		\arrow["i", from=2-1, to=2-2]
		\arrow[from=2-2, to=3-3]
		\arrow[from=3-1, to=2-1]
		\arrow["q", "\sim"', curve={height=-18pt}, from=2-2, to=3-4]
		\arrow["{i_2}"', "\sim", hook, from=3-1, to=2-2]
		\arrow["{i_1'}", "\sim"', hook', from=3-1, to=4-2]
		\arrow["{q''}", dotted, from=3-3, to=3-4]
		\arrow[from=4-2, to=3-3]
		\arrow[from=3-1, to=4-1]
		\arrow[from=5-1, to=4-1]
		\arrow["i'", from=4-1, to=4-2]
		\arrow["q'"', "\sim", curve={height=18pt}, from=4-2, to=3-4]
		\arrow["{i_2'}"', "\sim", hook, from=5-1, to=4-2]
	\end{tikzcd}\]
	Using (\textbf{MC1}) and the fact that acyclic cofibrations are inviariant under pushouts, it is clear that $q''$ must be a weak equivalence, therefore $A\wedge I''$ is a cylinder. We find a morphism $H''$ using again the universal property of the pushout.
	\[\begin{tikzcd}
		& {A\wedge I} \\
		A && {A \wedge I''} & B \\
		& {A \wedge I'}
		\arrow[from=1-2, to=2-3]
		\arrow["H", curve={height=-12pt}, from=1-2, to=2-4]
		\arrow["{i_2}"', from=2-1, to=1-2]
		\arrow["{i_1'}", from=2-1, to=3-2]
		\arrow["{H''}", dashed, from=2-3, to=2-4]
		\arrow[from=3-2, to=2-3]
		\arrow["{H'}"', curve={height=12pt}, from=3-2, to=2-4]
	\end{tikzcd}\]
	We conclude the proof, because $H''$ is a left homotopy between $f$ and $h$.
\end{proof}

Let us consider a morphism $p \colon X \longrightarrow Y$ and take $f,g \colon A \longrightarrow X$ such that $f\lsim g$. If we let $H$ be an homotopy from $f,g$, by postocomposing $H$ with $p$ we get an homotopy between $pf$ and $pg$.
\[\begin{tikzcd}
	A \\
	& {A \wedge I} & X & Y \\
	A
	\arrow[from=1-1, to=2-2]
	\arrow["f", curve={height=-12pt}, from=1-1, to=2-3]
	\arrow["H", from=2-2, to=2-3]
	\arrow["p", "\sim"', from=2-3, to=2-4]
	\arrow[from=3-1, to=2-2]
	\arrow["g"', curve={height=12pt}, from=3-1, to=2-3]
\end{tikzcd}\]
Therefore $p$ induces the following map between $\pi^l(A,X)$ and $\pi^l(A,Y)$:
\begin{align*}
	p_*\colon \pi^l(A,X) &\longrightarrow \pi^l(A,Y) \\
	[f] &\mapsto [pf].
\end{align*}
By duality, given $i\colon A \longrightarrow B$, we get a map 
\begin{align*}
	i^*\colon \pi^l(B,X) &\longrightarrow \pi^l(A,X) \\
	[f] &\mapsto [fi].
\end{align*}

\begin{lemma}
	\label{lem:bij}
	If $A$ is cofibrant and $p\colon X \longrightarrow Y$ is an acyclic fibration, then $p_*\colon \pi^l(A,X) \longrightarrow \pi^l(A,Y)$ is a bijection. 
	If $X$ is fibrant and $i\colon A \longrightarrow B$ is an acyclic cofibration, then $p_*\colon \pi^l(A,X) \longrightarrow \pi^l(A,Y)$ is a bijection.
\end{lemma}
\begin{proof}
	Let $A$ be cofibrant and let $p\colon X \longrightarrow Y$ be an acyclic fibration. Now let $[f] \in \pi^l(A,Y)$ be a (left) homotopy class of morphisms between $A$ and $Y$. Then the hypotheses we have are exactly the ones needed to show that there exists a lift in the following square.
	\[\begin{tikzcd}
		\emptyset & X \\
		A & Y
		\arrow[from=1-1, to=1-2]
		\arrow[hook', from=1-1, to=2-1]
		\arrow["p", two heads, from=1-2, to=2-2]
		\arrow["g", dashed, from=2-1, to=1-2]
		\arrow["f"', from=2-1, to=2-2]
	\end{tikzcd}\]
	Given that $p_*([g]) = [f]$ we have that $p_*$ is surgective. \\
	To prove injectivity, we consider $[f],[g]\in \pi^l(A,X)$ such that $[pf]=[pg]$, therefore, using lemma \ref{lem:good-hom}, we have a good left homotopy $H\colon A \wedge I \longrightarrow X$ between $pf$ and $pg$. We have defined a diagram where a lift exists by (\textbf{MC3}).
	\[\begin{tikzcd}
		{A \amalg A} & X \\
		{A\wedge I} & {Y,}
		\arrow["{f+g}", from=1-1, to=1-2]
		\arrow["i", hook', from=1-1, to=2-1]
		\arrow["p", two heads, from=1-2, to=2-2]
		\arrow["K"', dashed, from=2-1, to=1-2]
		\arrow["H"', from=2-1, to=2-2]
	\end{tikzcd}\]
	$K$ is exactly a left homotopy between $f$ and $g$, therefore $[f] = [g]$.

\end{proof}

\begin{lemma}
	Let $f,g \colon  A \longrightarrow B$ be morphisms, then:
	\begin{itemize}
		\item If $B$ is fibrant and $h\colon A' \longrightarrow A$ is a morphism then $f \lsim g$ implies $fh \lsim gh$.
		\item If $A$ is cofibrant and $h \colon B \longrightarrow B'$ is a morphism then $f \rsim g$ implies $hf \rsim hg$.
	\end{itemize}
\end{lemma}
\begin{proof}
	By lemma \ref{lem:good-hom} we can assume the existence of a very good homotopy $H \colon A \wedge I \longrightarrow B$ between $f$ and $g$. We then take a good cylinder object $A'\wedge I$ of $A'$:
	\[\begin{tikzcd}
		{A'\amalg A'} & {A'\wedge I} & {A'.}
		\arrow["{i'}", from=1-1, to=1-2]
		\arrow["{q'}", "\sim"', two heads, from=1-2, to=1-3]
	\end{tikzcd}\]
	Using the fact that the following diagram commutes,
	\[\begin{tikzcd}
		{A'\amalg A'} & {A\amalg A} \\
		{A'} & A
		\arrow["{\inn_1h+\inn_2h}"', from=1-1, to=1-2]
		\arrow["{\nabla_{A'}}"', from=1-1, to=2-1]
		\arrow["{\nabla_A}", from=1-2, to=2-2]
		\arrow["h", from=2-1, to=2-2]
	\end{tikzcd}\]
	we get a diagram
	\[\begin{tikzcd}
		{A'\amalg A'} & {A\amalg A} & {A\wedge  I} \\
		{A'\wedge I} & {A'} & A
		\arrow["{\inn_1h+\inn_2h}"', from=1-1, to=1-2]
		\arrow["{i'}", hook', from=1-1, to=2-1]
		\arrow["i"', hook, from=1-2, to=1-3]
		\arrow["q", "\sim"', two heads, from=1-3, to=2-3]
		\arrow["{q'}"', "\sim", from=2-1, to=2-2]
		\arrow["h"', from=2-2, to=2-3]
	\end{tikzcd}\]
	which admits a lift $K \colon A'\wedge I \longrightarrow A \wedge I $ by (\textbf{MC3}). The left homotopy we are looking for is no other than $HK$. 
	\[\begin{tikzcd}
		{A'} & A \\
		{A'\amalg A'} & {A\amalg A} & {A\wedge  I} & B \\
		{A'} & A
		\arrow["h"', from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
		\arrow["{i_1}", from=1-2, to=2-3]
		\arrow["f", curve={height=-12pt}, from=1-2, to=2-4]
		\arrow["{\inn_1h+\inn_2h}"', from=2-1, to=2-2]
		\arrow["K", from=2-2, to=2-3]
		\arrow["H", from=2-3, to=2-4]
		\arrow[from=3-1, to=2-1]
		\arrow["h", from=3-1, to=3-2]
		\arrow[from=3-2, to=2-2]
		\arrow["{i_2}"', from=3-2, to=2-3]
		\arrow["g"', curve={height=12pt}, from=3-2, to=2-4]
	\end{tikzcd}\]
\end{proof}

We would now like to see when composition between morphisms is well defined in the homotopy groups.

\begin{lemma}
	If $C$ is fibrant, then morphism composition defines a function
	\begin{align*}
		\pi^l(A,B) \times  \pi^l(B,C) &\longrightarrow \pi^l(A,C)  \\
		([f],[g]) & \mapsto [gf].
	\end{align*}
	If $A$ is cofibrant, then morphism composition defines a function
	\begin{align*}
		\pi^r(A,B) \times  \pi^r(B,C) &\longrightarrow \pi^r(A,C)  \\
		([f],[g]) & \mapsto [gf].
	\end{align*}
\end{lemma}
\begin{proof}
	We assume that $C$ is fibrant. To check that a map between quotient sets is well defined we only need to show that it is well defined for the generating relation. Let $f\lsim f'$ and $g \lsim g'$; we have already shown that $gf \lsim gf'$ and the previous lemma implies that $g'f' \lsim gf'$, thereofre $gf \lsim g'f'$.
\end{proof}

This previous results can be morally summarized as: "When all objects are fibrant and cofibrant morphism composition is well behaved with respect to homotopy".

\begin{proposition}
	Let $f,g \colon A \longrightarrow B$ be morphism, then:
	\begin{itemize}
		\item If $A$ is cofibrant and $f\lsim g$, then $f \rsim g$.
		\item If $B$ is fibrant and $f\rsim g$, then $f \lsim g$.
	\end{itemize}
\end{proposition}

\begin{proof}
	Let $H \colon A \wedge I \longrightarrow B$ be a good left homotopy between $f$ and $g$ and let 
	\[\begin{tikzcd}
		B & {B^I} & {B\times B}
		\arrow["j", from=1-1, to=1-2]
		\arrow["p", from=1-2, to=1-3]
	\end{tikzcd}\]
	be a good path object for $B$. Given that $A$ is cofibrant, we know that the morphism $i_0\colon A \longrightarrow A\wedge I$ must be an acyclic cofibration.
	By composing with the projections $\pi_1,\pi_2 \colon B \times B \longrightarrow B$ and observing that we get $f$, we can check that the following diagram commutes (where $i,p$ are the maps of the cylinder $A\wedge I$).
	\[\begin{tikzcd}
		A & {B^I} \\
		{A\wedge I} & {B \times B}
		\arrow["jf", from=1-1, to=1-2]
		\arrow["{i_0}", "\sim"', hook, from=1-1, to=2-1]
		\arrow["p", two heads, from=1-2, to=2-2]
		\arrow["{(fq,H)}"', from=2-1, to=2-2]
	\end{tikzcd}\]
	By (\textbf{MC3}) this diagram admits a lift, let $k$ be such a lift. By remembering that $qi_1 = \id_A$ we see that the following diagram commutes
	\[\begin{tikzcd}
		&&& B \\
		A & {A\wedge I} & {B^I} & {B \times B} \\
		&&& B
		\arrow["f", curve={height=-18pt}, from=2-1, to=1-4]
		\arrow["{i_1}", from=2-1, to=2-2]
		\arrow["g"', curve={height=18pt}, from=2-1, to=3-4]
		\arrow["fq"', curve={height=-6pt}, from=2-2, to=1-4]
		\arrow["k", from=2-2, to=2-3]
		\arrow["H", curve={height=6pt}, from=2-2, to=3-4]
		\arrow["p", from=2-3, to=2-4]
		\arrow["{\pi_1}"', from=2-4, to=1-4]
		\arrow["{\pi_2}", from=2-4, to=3-4]
	\end{tikzcd}\]
	and therefore $ki_1$ is a right homotopy between $f$ and $g$.
\end{proof}

It is important to remark that when the hypothesis of this proposition are satisfied the relation $\lsim $, $\rsim$ (which are the same) are an equivalence relation, which we will simply denote as $\sim$.

\begin{corollary}
	Let $f,g \colon A  \longrightarrow B$ be morphisms between a cofibrant and a fibrant object and let $A\wedge I$ be a cylinder object for $A$. If $f \sim g$ then there is a left homotopy between $f$ and $g$ through $A\wedge I$. Similarly if $B^I$ is a path object for $B$ and $f \sim g$ then there is a right homotopy between $f$ and $g$ through $B^I$.
\end{corollary}
\begin{proof}
	It immediately follows form the fact that in the proof of the proposition we are free to chose which cylinder/path object to use.
\end{proof}


\begin{theorem}
	Let $f\colon A \longrightarrow B$ be a morphism between objects that are both cofibrant and fibrant. We have that $f$ is a weak equivalence if and only if there exists a morphism $g\colon B \longrightarrow A$ such that $gf \sim \id_A$ and $fg \sim \id_B$, which we will call an homotopy inverse of $f$.
\end{theorem}
\begin{proof}
	($\Rightarrow $) Let $f$ be a weak equivalence. By (\textbf{MC4}) we can factor it as
	\[\begin{tikzcd}
		A & C & {B,}
		\arrow["i", hook, from=1-1, to=1-2]
		\arrow["f", shift left, curve={height=-12pt}, from=1-1, to=1-3]
		\arrow["p", two heads, from=1-2, to=1-3]
	\end{tikzcd}\]
	where both $i$ and $p$ are weak equivalences (given that $f$ is one). We can find a left inverse $r$ for $i$ by finding a lift in the following diagram.
	\[\begin{tikzcd}
		A & A \\
		C & \bullet
		\arrow["{\id_A}", from=1-1, to=1-2]
		\arrow["i"', "\sim", hook, from=1-1, to=2-1]
		\arrow[two heads, from=1-2, to=2-2]
		\arrow["r"', dashed, from=2-1, to=1-2]
		\arrow[from=2-1, to=2-2]
	\end{tikzcd}\]
	We can now observe that $i^*([ir]) = [iri] = [i] =i^*([\id_C]) $; given that  lemma \ref{lem:bij} shows that $i^*$ must be a bijection we deduce that $ir \sim \id_C$.
	By a similar argument we can find a morphism $s$ to use as a homotopy inverse of $p$, therefore we conclude by setting $g=rs$ and checking that it must be an homotopy inverse of $f$. \\
	($\Leftarrow $) Let $f$ be a morphism that admits a homotopy inverse $g$. By invoking (\textbf{MC4}) we can find a factorization of $f$ as follows.
	\[\begin{tikzcd}
		\emptyset & A & C & B & \bullet
		\arrow[hook, from=1-1, to=1-2]
		\arrow["i", "\sim"', hook, from=1-2, to=1-3]
		\arrow["f", curve={height=-18pt}, from=1-2, to=1-4]
		\arrow["p", two heads, from=1-3, to=1-4]
		\arrow[two heads, from=1-4, to=1-5]
	\end{tikzcd}\]
	It is immediate to see that $C$ must be both fibrant and cofibrant; to prove that $f$ is a weak equivalence we only need to show that p is one. Let now $H \colon B \wedge I \longrightarrow B$ be a good (left) homotopy between $fg$ and $\id_B$. We can find a lift in the following commutative diagram.
	\[\begin{tikzcd}
		B & C \\
		{B\wedge I} & B
		\arrow["ig", from=1-1, to=1-2]
		\arrow["{i_1}"', "\sim", hook, from=1-1, to=2-1]
		\arrow["p", two heads, from=1-2, to=2-2]
		\arrow["{H'}"', dashed, from=2-1, to=1-2]
		\arrow["H"', from=2-1, to=2-2]
	\end{tikzcd}\]
	Setting $s=H'i_1$ we get that $ps = \id_X$. Given that $i$ must be a weak equivalence it must admit a homotopy inverse $r$ by the previous case of this theorem. It is clear from the following diagram that $H'$ is an homotopy between $s$ and $ig$,
	\[\begin{tikzcd}
		B \\
		{B\wedge I} & C \\
		B
		\arrow["{i_1}"', from=1-1, to=2-1]
		\arrow["ig", from=1-1, to=2-2]
		\arrow["{H'}", from=2-1, to=2-2]
		\arrow["{i_1}", from=3-1, to=2-1]
		\arrow["s"', from=3-1, to=2-2]
	\end{tikzcd}\]
	therefore, using the fact that all objects involved are fibrant and cofibrant, we have
	\[
	sp \sim igp \sim \sim igfr \sim ir \sim \id_C.
	\]
	Given that $\id_C$ is a weak equivalence, we have that $sp$ must also be a weak equivalence. Given that $p$ is a retract of $sp$ we have proven thesis.
	\[\begin{tikzcd}
		C & C & C \\
		B & C & B
		\arrow["{\id_C}", from=1-1, to=1-2]
		\arrow["p", from=1-1, to=2-1]
		\arrow["{\id_C}", from=1-2, to=1-3]
		\arrow["sp", from=1-2, to=2-2]
		\arrow["p"', from=1-3, to=2-3]
		\arrow["s", from=2-1, to=2-2]
		\arrow["p", from=2-2, to=2-3]
	\end{tikzcd}\]
\end{proof}



\section{Homotopy categories}